'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var index = require('../symbols/index.cjs');
var classProperties = require('./helpers/class-properties.cjs');

/**
 * @license
 * Copyright Andrey Chalkin <L2jLiga@gmail.com> (https://github.com/L2jLiga). All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/L2jLiga/fastify-decorators/blob/master/LICENSE
 */
function ErrorHandler(parameter) {
    return function ({ constructor }, handlerName) {
        classProperties.ensureErrorHandlers(constructor);
        if (parameter == null) {
            constructor[index.ERROR_HANDLERS].push(handlerFactory(() => true, handlerName));
        }
        else if (typeof parameter === 'string') {
            constructor[index.ERROR_HANDLERS].push(handlerFactory((error) => (error === null || error === void 0 ? void 0 : error.code) === parameter, handlerName));
        }
        else {
            constructor[index.ERROR_HANDLERS].push(handlerFactory((error) => error instanceof parameter, handlerName));
        }
    };
}
function handlerFactory(accepts, handlerName) {
    return { accepts, handlerName };
}

exports.ErrorHandler = ErrorHandler;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbbnVsbF0sInNvdXJjZXNDb250ZW50IjpbbnVsbF0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHNCQUFxQjtBQUN6Qyw4QkFBOEIsZ0NBQStCO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsifQ==
